/*
 * Swipe 1.0
 *
 * Brad Birdsall, Prime
 * Copyright 2011, Licensed GPL & MIT
 *
 * Minified with: uglifyjs swipe.js -c -m
*/
window.Swipe=function(t,i){return t?(this.options=i||{},this.index=this.options.startSlide||0,this.speed=this.options.speed||300,this.callback=this.options.callback||function(){},this.delay=this.options.auto||0,this.container=t,this.element=this.container.children[0],this.container.style.overflow="hidden",this.element.style.listStyle="none",this.element.style.margin=0,this.setup(),this.begin(),this.element.addEventListener&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1),this.element.addEventListener("touchcancel",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1),window.addEventListener("resize",this,!1)),void 0):null},Swipe.prototype={setup:function(){if(this.slides=this.element.children,this.length=this.slides.length,2>this.length)return null;if(this.width=Math.ceil("getBoundingClientRect"in this.container?this.container.getBoundingClientRect().width:this.container.offsetWidth),0===this.width&&"function"==typeof window.getComputedStyle&&(this.width=window.getComputedStyle(this.container,null).width.replace("px","")),!this.width)return null;var t=this.container.style.visibility;this.container.style.visibility="hidden",this.element.style.width=Math.ceil(this.slides.length*this.width)+"px";for(var i=this.slides.length;i--;){var e=this.slides[i];e.style.width=this.width+"px",e.style.display="table-cell",e.style.verticalAlign="top"}this.slide(this.index,0),this.container.style.visibility=t},slide:function(t,i){var e=this.element.style;void 0==i&&(i=this.speed),e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=i+"ms",e.MozTransform=e.webkitTransform="translate3d("+-(t*this.width)+"px,0,0)",e.msTransform=e.OTransform="translateX("+-(t*this.width)+"px)",this.index=t},slideTo:function(t,i){for(var e=0;this.slides.length>e;++e){var s=this.slides[e];if(s.id==t)return this.slide(e,i),void 0}},getPos:function(){return this.index},prev:function(t){this.delay=t||0,clearTimeout(this.interval),this.index?this.slide(this.index-1,this.speed):this.slide(this.length-1,this.speed)},next:function(t){this.delay=t||0,clearTimeout(this.interval),this.index<this.length-1?this.slide(this.index+1,this.speed):this.slide(0,this.speed)},begin:function(){var t=this;this.interval=this.delay?setTimeout(function(){t.next(t.delay)},this.delay):0},stop:function(){this.delay=0,clearTimeout(this.interval)},resume:function(){this.delay=this.options.auto||0,this.begin()},handleEvent:function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchcancel":case"touchend":this.onTouchEnd(t);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"transitionend":this.transitionEnd(t);break;case"resize":this.setup()}},transitionEnd:function(t){this.delay&&this.begin(),this.callback(t,this.index,this.slides[this.index])},onTouchStart:function(t){this.start={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,time:Number(new Date)},this.isScrolling=void 0,this.deltaX=0,this.element.style.MozTransitionDuration=this.element.style.webkitTransitionDuration=0,t.stopPropagation()},onTouchMove:function(t){t.touches.length>1||t.scale&&1!==t.scale||(this.deltaX=t.touches[0].pageX-this.start.pageX,this.isScrolling===void 0&&(this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(t.touches[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),clearTimeout(this.interval),this.deltaX=this.deltaX/(!this.index&&this.deltaX>0||this.index==this.length-1&&0>this.deltaX?Math.abs(this.deltaX)/this.width+1:1),this.element.style.MozTransform=this.element.style.webkitTransform="translate3d("+(this.deltaX-this.index*this.width)+"px,0,0)",t.stopPropagation()))},onTouchEnd:function(t){var i=250>Number(new Date)-this.start.time&&Math.abs(this.deltaX)>20||Math.abs(this.deltaX)>this.width/2,e=!this.index&&this.deltaX>0||this.index==this.length-1&&0>this.deltaX;this.isScrolling||this.slide(this.index+(i&&!e?0>this.deltaX?1:-1:0),this.speed),t.stopPropagation()}};